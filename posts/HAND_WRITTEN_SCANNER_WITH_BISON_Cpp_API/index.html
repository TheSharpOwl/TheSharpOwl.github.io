<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Using Bison C++ API With Hand-written Scanner" /><meta property="og:locale" content="en" /><meta name="description" content="In this post, I’ll talk about how can you use Bison’s C++ API. Take a look at the tutorial I wrote about using C API especially the parts about installing Bison latest version and Compiler Construction. Also, to gain more knowledge about how Bison works. Well, as I said in the C API post, you can’t use dynamic types such as std::string or std::vector as Bison types which is one of the reasons of using C++ API (The main reason is that C++ is cooler of course !)." /><meta property="og:description" content="In this post, I’ll talk about how can you use Bison’s C++ API. Take a look at the tutorial I wrote about using C API especially the parts about installing Bison latest version and Compiler Construction. Also, to gain more knowledge about how Bison works. Well, as I said in the C API post, you can’t use dynamic types such as std::string or std::vector as Bison types which is one of the reasons of using C++ API (The main reason is that C++ is cooler of course !)." /><link rel="canonical" href="https://thesharpowl.github.io/posts/HAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API/" /><meta property="og:url" content="https://thesharpowl.github.io/posts/HAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API/" /><meta property="og:site_name" content="TheSharpOwl" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-10-24T22:00:00+03:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Using Bison C++ API With Hand-written Scanner" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-08T02:07:15+03:00","datePublished":"2020-10-24T22:00:00+03:00","description":"In this post, I’ll talk about how can you use Bison’s C++ API. Take a look at the tutorial I wrote about using C API especially the parts about installing Bison latest version and Compiler Construction. Also, to gain more knowledge about how Bison works. Well, as I said in the C API post, you can’t use dynamic types such as std::string or std::vector as Bison types which is one of the reasons of using C++ API (The main reason is that C++ is cooler of course !).","headline":"Using Bison C++ API With Hand-written Scanner","mainEntityOfPage":{"@type":"WebPage","@id":"https://thesharpowl.github.io/posts/HAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API/"},"url":"https://thesharpowl.github.io/posts/HAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API/"}</script><title>Using Bison C++ API With Hand-written Scanner | TheSharpOwl</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="TheSharpOwl"><meta name="application-name" content="TheSharpOwl"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">TheSharpOwl</a></div><div class="site-subtitle font-italic">Welcome to my blog!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/TheSharpOwl" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ziadwork2020','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Using Bison C++ API With Hand-written Scanner</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Using Bison C++ API With Hand-written Scanner</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1603566000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 24, 2020 </em> </span> <span> Updated <em class="" data-ts="1657235235" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 8, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Mohamad Ziad Alkabakibi</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2235 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><p>In this post, I’ll talk about how can you use Bison’s C++ API. Take a look at the <a href="https://thesharpowl.github.io/posts/HAND_WRITTEN_SCANNER_WITH_BISON_C_API/">tutorial I wrote about using C API</a> especially the parts about installing Bison latest version and Compiler Construction. Also, to gain more knowledge about how Bison works.<br /> <br /></p><ol><li><p>Well, as I said in the C API post, you can’t use dynamic types such as <code class="language-plaintext highlighter-rouge">std::string</code> or <code class="language-plaintext highlighter-rouge">std::vector</code> as Bison types which is one of the reasons of using C++ API (The main reason is that C++ is cooler of course !).</p><p>Again this tutorial is not focusing on Bison itself, just the C++ API part.</p><li>We have a simple input file in an imperative language :<br /><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> var some_identifer is integer
</pre></table></code></div></div><p><br /></p><li>Now let’s write a simple Scanner in C++ (same idea as the C one) :<br /></ol><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
</pre><td class="rouge-code"><pre><span class="cp">#include</span><span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span><span class="cpf">&lt;fstream&gt;</span><span class="cp">
#include</span><span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="c1">// I know that global variables are often bad. Forgive me I wanna just explain the idea ((</span>
<span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">fin</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="nf">get_next_token</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// could be done better but organized it like this to edit only assignments and returns when using Bison API</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
            <span class="n">fin</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="c1">// get one character</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="s">""</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">' '</span> <span class="o">||</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">'\n'</span> <span class="o">||</span> <span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="c1">// we only have this character</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
                    <span class="k">return</span> <span class="s">""</span><span class="p">;</span>
                <span class="c1">//otherwise go and see what's next</span>
                <span class="k">return</span> <span class="n">get_next_token</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
                <span class="p">{</span>
                   <span class="c1">// now we need to put the pointer exactly after the word (undo the last step)</span>
                   <span class="c1">// NOTE : don't use unget if you reach the end of the file because it will clear eof bit and bad stuff will happen !!!</span>
                   <span class="n">fin</span><span class="p">.</span><span class="n">unget</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">"var"</span><span class="p">)</span> <span class="c1">// the last word is var</span>
                    <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">"integer"</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">"is"</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="c1">// it means it is some identifier name</span>
                    <span class="k">return</span>  <span class="s">"Identifier"</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="p">((</span><span class="n">c</span> <span class="o">&gt;=</span> <span class="sc">'A'</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">'Z'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">c</span> <span class="o">&gt;=</span> <span class="sc">'a'</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">'z'</span><span class="p">)</span> <span class="o">||</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">'_'</span><span class="p">)</span> <span class="c1">// reading some name</span>
        <span class="p">{</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">c</span><span class="p">;</span> <span class="c1">// add the char to the string</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">// we don't know what's that</span>
            <span class="k">return</span> <span class="s">"ERROR"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>

    <span class="n">fin</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">get_next_token</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">temp</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="c1">// printing a space since our example is only one line for now</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">temp</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">get_next_token</span><span class="p">();</span>

    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><ol><li>Now the Bison part. (not going to go deep into grammar rules or the way you design them. I learned grammar in Theoretical Computer Science course) but I will talk about the programming aspects.<br /><ul><li><h4 id="save-the-bison-file-with-ypp-extenstion-to-make-it-work-properly-with-a-c-compiler"><span class="mr-2"><strong>Save the Bison file with .ypp extenstion to make it work properly with a C++ compiler</strong></span><a href="#save-the-bison-file-with-ypp-extenstion-to-make-it-work-properly-with-a-c-compiler" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><li><p>Bison file consists of 4 parts :</p><p>I. Defines and requirements (statementsstart with <code class="language-plaintext highlighter-rouge">%</code> usually).</p><p>II. C/С++ code part(s) for includes and signatures (will be at the beginning of the generated .h file)</p><p>III. Grammar part</p><p>IV. Function defintions’ part</p><h3 id="note-that-in-bisons-c-api-a-class-parser-is-generated-unlike-in-the-c-api-were-we-have-only-functions"><span class="mr-2"><strong>Note that in Bison’s C++ API, a class <code class="language-plaintext highlighter-rouge"><span class="mr-2">Parser</code> is generated unlike in the C API were we have only functions.</strong><br /></span><a href="#note-that-in-bisons-c-api-a-class-parser-is-generated-unlike-in-the-c-api-were-we-have-only-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></ul><li>Take a look at this Bison with C++ example (I will explain after that) :</ol><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre><td class="rouge-code"><pre><span class="o">%</span><span class="n">require</span> <span class="s">"3.2"</span>
<span class="o">%</span><span class="n">language</span> <span class="s">"C++"</span>
<span class="o">%</span><span class="n">define</span> <span class="n">api</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">type</span> <span class="n">variant</span>
<span class="o">%</span><span class="n">define</span> <span class="n">api</span><span class="p">.</span><span class="n">token</span><span class="p">.</span><span class="n">constructor</span>
<span class="o">%</span><span class="n">define</span> <span class="n">parse</span><span class="p">.</span><span class="n">assert</span>

<span class="o">%</span><span class="n">code</span> <span class="k">requires</span>
<span class="p">{</span>
    <span class="cp">#pragma once
</span>    <span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>    <span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>    
    <span class="c1">// forward decleration (1)</span>
    <span class="k">namespace</span> <span class="n">yy</span>
    <span class="p">{</span>
        <span class="k">class</span> <span class="nc">parser</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">%</span><span class="n">code</span>
<span class="p">{</span>    
    <span class="k">namespace</span> <span class="n">yy</span>
    <span class="p">{</span>
        <span class="n">parser</span><span class="o">::</span><span class="n">symbol_type</span> <span class="n">yylex</span><span class="p">();</span> <span class="c1">// override (2)</span>
        <span class="c1">// no need to override the error function because it is already waiting for our implementation (3)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">%</span><span class="n">token</span> <span class="n">IDENT</span> <span class="n">VAR</span> <span class="n">INT</span> <span class="n">IS</span>
<span class="o">%</span><span class="n">type</span> <span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">IDENT</span>

<span class="o">%%</span>

<span class="n">Program</span><span class="o">:</span>
<span class="o">|</span><span class="n">Program</span> <span class="n">VariableDeclaration</span>
<span class="p">;</span>

<span class="n">VariableDeclaration</span><span class="o">:</span> <span class="n">VAR</span> <span class="n">IDENT</span> <span class="n">IS</span> <span class="n">INT</span> <span class="p">{</span> <span class="cm">/* no actions for now (4) */</span> <span class="p">}</span>
<span class="p">;</span>

<span class="o">%%</span>
<span class="k">namespace</span> <span class="n">yy</span>
<span class="p">{</span>
    <span class="n">parser</span><span class="o">::</span><span class="n">symbol_type</span> <span class="n">yylex</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span>  <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_YYEOF</span> <span class="p">();</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">parser</span><span class="o">::</span><span class="n">error</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span> <span class="c1">//(3+)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span> <span class="s">"syntax error!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">yy</span><span class="o">::</span><span class="n">parser</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// (5)</span>
    <span class="c1">// will be deleted later just make sure it prints it</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"hello</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><ol><li><p>First, we are using Bison macros (not sure of their official name) which have <code class="language-plaintext highlighter-rouge">%</code> at the beginning of them:</p><ul><li>Adding a condition about the least version which can be used with the used programming language.<li><strong>Note: As the documentation says, C++ Bison API is pure always so no need to add <code class="language-plaintext highlighter-rouge">%define api.pure full</code> as we did in the C API.</strong><li><code class="language-plaintext highlighter-rouge">%define api.value.type variant</code> : As we know in C++, we don’t use <code class="language-plaintext highlighter-rouge">unions</code> (you can but the standard doesn’t recommend it usually. You can check <a href="https://en.cppreference.com/w/cpp/utility/variant">this</a> and <a href="https://stackoverflow.com/questions/42082328/where-to-use-stdvariant-over-union">this question</a>). So now you can directly just write the type of each token without the need to define a union with field names as we did in the C API.<li><p><code class="language-plaintext highlighter-rouge">%define api.token.constructor</code>: this one will generate functions in our .hpp file for each token which has a type. For example <code class="language-plaintext highlighter-rouge">%type &lt;std::string&gt; IDENT</code> generates a constructor : <code class="language-plaintext highlighter-rouge">make_IDENT(std::string)</code> (also another one <code class="language-plaintext highlighter-rouge">make_IDENT(std::string&amp;)</code>). As a result, we can use it in our scanner later, it will put the string in the parameter in the value which corresponds to our <code class="language-plaintext highlighter-rouge">IDENT</code> token and all we have to do is <code class="language-plaintext highlighter-rouge">return make_IDENT(string_variable)</code> (in the C API we had to do <code class="language-plaintext highlighter-rouge">lval-&gt;s = some_char_array</code> where s is the name of the char array field in our union and then return the token).</p><li><p><code class="language-plaintext highlighter-rouge">%define parse.assert</code> seems to help us with useful error messages and warnings according to <a href="https://www.gnu.org/software/bison/manual/html_node/_0025define-Summary.html">this doc page</a> :</p><blockquote><p>Directive: <code class="language-plaintext highlighter-rouge">%define parse.assert</code></p><ul><li>Languages(s): C, C++ <br /><li>Purpose: Issue runtime assertions to catch invalid uses. In C, some important invariants in the implementation of the parser are checked when this option is enabled.<br /><br /><li>In C++, when variants are used (see section C++ Variants), symbols must be constructed and destroyed properly. This option checks these constraints using runtime type information (RTTI). Therefore the generated code cannot be compiled with RTTI disabled (via compiler options such as -fno-rtti).<br /><li>Accepted Values: Boolean <br /><li>Default Value: false</ul></blockquote></ul><li><p><code class="language-plaintext highlighter-rouge">%code requires</code> block which contains the required things which must be added at the beginning of our .hpp file. For example, we need <code class="language-plaintext highlighter-rouge">&lt;string&gt;</code> because in the header file, Bison wants to use it for making the <code class="language-plaintext highlighter-rouge">IDENT</code> constructor. (I don’t know if I should add <code class="language-plaintext highlighter-rouge">#pragma once</code> or not but just in case). <strong>Note in (1) we did forward declreation because we want to override <code class="language-plaintext highlighter-rouge">yylex()</code> (as you will see next) which belongs to the class <code class="language-plaintext highlighter-rouge">parser</code> while the class definition will be after the overriding. For more info about Forward Decleration <a href="https://stackoverflow.com/questions/4757565/what-are-forward-declarations-in-c">read this</a></strong>.</p><li><strong>We defined <code class="language-plaintext highlighter-rouge">yylex()</code> (which belongs to the yy namespace in the C++ API) inside the <code class="language-plaintext highlighter-rouge">%code requires</code> block to make sure that the definition will be before any generated code.</strong> (Also, remember that to override a function inside a name space in C++, you have to put it inside the namespace like I did. aka <strong>defining it like : <code class="language-plaintext highlighter-rouge">yy::yylex()</code> won’t work</strong>).<br /> <strong>Note: in (2) we wrote <code class="language-plaintext highlighter-rouge">parser::</code> because <code class="language-plaintext highlighter-rouge">yylex</code> function belongs to the class <code class="language-plaintext highlighter-rouge">parser</code> (not a namespace!!)</strong><li>As you can remember from the C API, we have <code class="language-plaintext highlighter-rouge">yyerror</code> function but <strong>we don’t have to rewrite the signature of it because it will be generated anyway and we just have to write the impelementation as said in (3)</strong>.<li>Now we have to define the tokens and using <code class="language-plaintext highlighter-rouge">%token</code> and rewrite the names of the ones which have a type to specify the type to Bison using <code class="language-plaintext highlighter-rouge">%type &lt;some_type_name&gt;</code>. Now as we said in the first point, there will be a constructor for each type with a prameter of its type. (we will use this soon don’t worry).<li>In the grammar rules section, I declared an empty rule for <code class="language-plaintext highlighter-rouge">Program</code> so that the parser will have a starting point <strong>(Note that always there should be such rule, otherwise the parser mostly will return a syntax error and won’t run from the first place)</strong> <br /> <br /> Now inside <code class="language-plaintext highlighter-rouge">Parser.tab.hpp</code> there’s :<div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">static</span> <span class="n">symbol_type</span> <span class="nf">make_IDENT</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">symbol_type</span> <span class="p">(</span><span class="n">token</span><span class="o">::</span><span class="n">IDENT</span><span class="p">,</span> <span class="n">v</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div></ol><ul><li><p>This is a generated function which returns a type called <code class="language-plaintext highlighter-rouge">symbol_type</code> which Bison understands and supports for applying its grammar but as you can see, we should give it a string as a parameter (which is passed by a const refrernce of course since it’s faster). Also, notice that it sends something else in addition to the string: <code class="language-plaintext highlighter-rouge">token::IDENT</code> where <code class="language-plaintext highlighter-rouge">token</code> is an enum and <code class="language-plaintext highlighter-rouge">IDENT</code> is one of the values which that enum can take.</p><li>There are similar functions and enum values for the other tokens <code class="language-plaintext highlighter-rouge">VAR, INT, IS</code> but for example we have:<div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">static</span> <span class="n">symbol_type</span> <span class="nf">make_VAR</span> <span class="p">()</span>
<span class="p">{</span>
<span class="k">return</span> <span class="n">symbol_type</span> <span class="p">(</span><span class="n">token</span><span class="o">::</span><span class="n">VAR</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><li>We don’t have a parameter and it only keeps the enum inside the symoble info (calling <code class="language-plaintext highlighter-rouge">symbol_type</code> constructor with 1 parameter) because we don’t have a type attached to this token so that’s all Bison needs in this case.</ul><p>Now it’s time to integrate our Bison parser with our C++ scanner using the make_ methods in addition to using the correct way to define and override the parser class function.</p><p>The scanner will have this code : (comments might be repeated for the final version and for better understanding)</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
</pre><td class="rouge-code"><pre><span class="cp">#include</span><span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span><span class="cpf">&lt;fstream&gt;</span><span class="cp">
#include</span><span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">"parser.tab.hpp"</span><span class="cp">
</span><span class="c1">// I know that global variables are often bad. Forgive me I wanna just explain the idea ((</span>
<span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">fin</span><span class="p">;</span>

<span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">symbol_type</span> <span class="nf">get_next_token</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// could be done better but organized it like this to edit only assignments and returns when using Bison API</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
            <span class="n">fin</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="c1">// get one character</span>
        <span class="k">else</span> <span class="c1">// return the end of the file so the parser will stop</span>
            <span class="k">return</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_YYEOF</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">' '</span> <span class="o">||</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">'\n'</span> <span class="o">||</span> <span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="c1">// we only have this character</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
                    <span class="k">return</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_YYEOF</span><span class="p">();</span>
                    
                <span class="c1">//otherwise go and see what's next</span>
                <span class="k">return</span> <span class="n">get_next_token</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">fin</span><span class="p">.</span><span class="n">eof</span><span class="p">())</span>
                <span class="p">{</span>
                   <span class="c1">// now we need to put the pointer exactly after the word (undo the last step)</span>
                   <span class="n">fin</span><span class="p">.</span><span class="n">unget</span><span class="p">();</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">"var"</span><span class="p">)</span> <span class="c1">// the last word is var</span>
                    <span class="k">return</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_VAR</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">"integer"</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_INT</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="s">"is"</span><span class="p">)</span>
                   <span class="k">return</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_IS</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">s</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="c1">// it means it is some identifier name </span>
                   <span class="k">return</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_IDENT</span><span class="p">(</span><span class="n">s</span><span class="p">);</span> <span class="c1">// don't forget to pass the identifier name stored in the string</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="p">((</span><span class="n">c</span> <span class="o">&gt;=</span> <span class="sc">'A'</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">'Z'</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">c</span> <span class="o">&gt;=</span> <span class="sc">'a'</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="sc">'z'</span><span class="p">)</span> <span class="o">||</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">'_'</span><span class="p">)</span> <span class="c1">// reading some name</span>
        <span class="p">{</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">c</span><span class="p">;</span> <span class="c1">// add the char to the string</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">// we don't know what's that so return undefined token</span>
            <span class="k">return</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">make_YYUNDEF</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">fin</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">);</span>
    <span class="n">yy</span><span class="o">::</span><span class="n">parser</span> <span class="n">p</span><span class="p">;</span>
	<span class="n">p</span><span class="p">.</span><span class="n">parse</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">namespace</span> <span class="n">yy</span>
<span class="p">{</span>
    <span class="n">parser</span><span class="o">::</span><span class="n">symbol_type</span> <span class="n">yylex</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">get_next_token</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>and for the parser code :</p><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre><td class="rouge-code"><pre><span class="o">%</span><span class="n">require</span> <span class="s">"3.2"</span>
<span class="o">%</span><span class="n">language</span> <span class="s">"C++"</span>
<span class="o">%</span><span class="n">define</span> <span class="n">api</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">type</span> <span class="n">variant</span>
<span class="o">%</span><span class="n">define</span> <span class="n">api</span><span class="p">.</span><span class="n">token</span><span class="p">.</span><span class="n">constructor</span>
<span class="o">%</span><span class="n">define</span> <span class="n">parse</span><span class="p">.</span><span class="n">assert</span>

<span class="o">%</span><span class="n">code</span> <span class="k">requires</span>
<span class="p">{</span>
    <span class="cp">#pragma once
</span>    <span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>    <span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>    
    <span class="c1">// forward decleration (1)</span>
    <span class="k">namespace</span> <span class="n">yy</span>
    <span class="p">{</span>
        <span class="k">class</span> <span class="nc">parser</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">%</span><span class="n">code</span>
<span class="p">{</span>    
    <span class="k">namespace</span> <span class="n">yy</span>
    <span class="p">{</span>
        <span class="n">parser</span><span class="o">::</span><span class="n">symbol_type</span> <span class="n">yylex</span><span class="p">();</span> <span class="c1">// override (2)</span>
        <span class="c1">// no need to override the error function because it is already waiting for our implementation (3)</span>
    <span class="p">}</span>
    <span class="cm">/* 
    because this function is in the main cpp file, we have to tell the compiler that its definition is outside so that Bison won't also generate an implementation by itself.
    */</span>
    <span class="k">extern</span> <span class="n">yy</span><span class="o">::</span><span class="n">parser</span><span class="o">::</span><span class="n">symbol_type</span> <span class="nf">get_next_token</span><span class="p">();</span>
<span class="p">}</span>

<span class="o">%</span><span class="n">token</span> <span class="n">IDENT</span> <span class="n">VAR</span> <span class="n">INT</span> <span class="n">IS</span>
<span class="o">%</span><span class="n">type</span> <span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">IDENT</span>

<span class="o">%%</span>

<span class="n">Program</span><span class="o">:</span>
<span class="o">|</span><span class="n">Program</span> <span class="n">VariableDeclaration</span>
<span class="p">;</span>

<span class="n">VariableDeclaration</span><span class="o">:</span> <span class="n">VAR</span> <span class="n">IDENT</span> <span class="n">IS</span> <span class="n">INT</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"defined an int variable "</span> <span class="o">&lt;&lt;</span> <span class="err">$</span><span class="mi">2</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="cm">/* now we will print what we have */</span> <span class="p">}</span>
<span class="p">;</span>

<span class="o">%%</span>
<span class="k">namespace</span> <span class="n">yy</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">parser</span><span class="o">::</span><span class="n">error</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span> <span class="c1">//(3+)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span> <span class="s">"syntax error!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>You can find all the final code examples <a href="https://github.com/TheSharpOwl/Bison_API_Tutorial/tree/main/Cpp">here</a>.</p><p><strong>Further Reading:</strong><br /></p><ol><li><a href="https://www.gnu.org/software/bison/manual/bison.html">Bison Documentation</a>.<li><a href="https://github.com/TheSharpOwl/FoobarCompiler/tree/061d6f544a72dcd4acd509b3b933999f4f63a5d6/compiler">My parser for an imperative programming language</a> (it is C++ Scanner using Bison’s C API but it would be useful to read).<li><a href="https://www.amazon.com/flex-bison-Text-Processing-Tools/dp/0596155972">Flex &amp; Bison: Text Processing Tools 1st Edition book by John Levine</a>.</ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/compilers/'>Compilers</a>, <a href='/categories/bison/'>Bison</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cpp/" class="post-tag no-text-decoration" >Cpp</a> <a href="/tags/bison/" class="post-tag no-text-decoration" >Bison</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Using+Bison+C%2B%2B+API+With+Hand-written+Scanner+-+TheSharpOwl&url=https%3A%2F%2Fthesharpowl.github.io%2Fposts%2FHAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Using+Bison+C%2B%2B+API+With+Hand-written+Scanner+-+TheSharpOwl&u=https%3A%2F%2Fthesharpowl.github.io%2Fposts%2FHAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fthesharpowl.github.io%2Fposts%2FHAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API%2F&text=Using+Bison+C%2B%2B+API+With+Hand-written+Scanner+-+TheSharpOwl" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/COMIPLING_SHADERS_DIRECTD/">Compiling HLSL Shaders with Direct3D12 and CMake (With Error Reporting) Part 1</a><li><a href="/posts/HAND_WRITTEN_SCANNER_WITH_BISON_C_API/">Using Bison C API With Hand-written Scanner</a><li><a href="/posts/HAND_WRITTEN_SCANNER_WITH_BISON_Cpp_API/">Using Bison C++ API With Hand-written Scanner</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bison/">Bison</a> <a class="post-tag" href="/tags/c/">C</a> <a class="post-tag" href="/tags/cmake/">cmake</a> <a class="post-tag" href="/tags/cpp/">Cpp</a> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/direct3d12/">direct3d12</a> <a class="post-tag" href="/tags/visual-studio/">visual studio</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/HAND_WRITTEN_SCANNER_WITH_BISON_C_API/"><div class="card-body"> <em class="small" data-ts="1603011600" data-df="ll" > Oct 18, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Using Bison C API With Hand-written Scanner</h3><div class="text-muted small"><p> You may have a compilers course and wanna learn how to use Bison with your other code. When I had this course I got in a big confusion while trying to use Bison with a Hand Written parser (in my o...</p></div></div></a></div><div class="card"> <a href="/posts/COMIPLING_SHADERS_DIRECTD/"><div class="card-body"> <em class="small" data-ts="1656010800" data-df="ll" > Jun 23, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Compiling HLSL Shaders with Direct3D12 and CMake (With Error Reporting) Part 1</h3><div class="text-muted small"><p> Note: This post is still in progress (don’t worry I am working on it almost everyday, I didn’t abandon it and it will be ready very soon). However, feel free to message me about improving the curre...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/HAND_WRITTEN_SCANNER_WITH_BISON_C_API/" class="btn btn-outline-primary" prompt="Older"><p>Using Bison C API With Hand-written Scanner</p></a> <a href="/posts/COMIPLING_SHADERS_DIRECTD/" class="btn btn-outline-primary" prompt="Newer"><p>Compiling HLSL Shaders with Direct3D12 and CMake (With Error Reporting) Part 1</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">Mohamad Ziad Alkabakibi</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bison/">Bison</a> <a class="post-tag" href="/tags/c/">C</a> <a class="post-tag" href="/tags/cmake/">cmake</a> <a class="post-tag" href="/tags/cpp/">Cpp</a> <a class="post-tag" href="/tags/cpp/">cpp</a> <a class="post-tag" href="/tags/direct3d12/">direct3d12</a> <a class="post-tag" href="/tags/visual-studio/">visual studio</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
